<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <meta name="viewport" content="width=device-width">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font: 16px sans-serif;
    }

    p {
      max-width: 800px;
    }

    .subtitle {
      font-size: 12px;
      margin: 0;
    }

    button {
      cursor: pointer;
      padding: 12px;
      background: #999;
      font-family: 'Roboto Slab', sans-serif;
      font-size: 16px;
      border: none;
      outline: none;
      color: white;
      border-bottom: 2px solid #797979;
    }

    input {
      display: block;
      width: 100%;
      max-width: 500px;
      margin-top: 5px;
      margin-bottom: 5px;
      padding: 10px;
      border: 1px solid #cfcfcf;
      font-family: sans-serif;
      font-size: 14px;
      outline: none;
    }

    #results {
      color: #2ed05b;
    }

    .loader {
      position: fixed;
      left: 0;
      bottom: 0;
      width: 100%;
      color: white;
      background-color: #444;
      padding: 10px;
    }

    code {
      padding: 0.2em 0.3em;
      margin: 0;
      font-size: 85%;
      background-color: #eee;
      border-radius: 3px;
    }

    @media (min-height: 500px) {
      .visible-small-height {
        display: none;
      }
    }
  </style>
</head>
<body>
  <h2>
    Webpack performance
    <small style="opacity: 0.8">
      (<a href="https://github.com/everdimension/webpack-bundle-test">github</a>)
    </small>
  </h2>
  <input
    type="text"
    placeholder="when heavy computations are in the main thread, typing is not very responsive..."
  />
  <p class="subtitle">
    This input is here only for an indication of whether the page is interactive or the main thread is blocked.
  </p>
  <p class="visible-small-height">(For more details scroll to bottom)</p>
  <p>
    <button id="fromModuleButton">perform computations from code bundled with webpack</button>
    <br />
    <br />
    <button id="unwrappedCodeButton">perform computations in untouched code</button>
  </p>

  <div id="results"></div>

  <p>
    This page measures performance of the same
    <a href="https://github.com/everdimension/web-worker-test/blob/master/src/doComputations.js">function</a>
    that does some heavy computations with lots of iterations&nbsp;(100&#8239;000&#8239;000 by default).
  </p>
  <p>
    The performance of the function itself does not matter. The main purpose is to compare how long it takes
    to run this function in different conditions: code wrapped by webpack and code untouched by webpack.
  </p>
  <p>
    <b>The peculiarity that I've noticed</b> is that the function takes <b>much</b> longer to run in Chrome when it is
    <code>bundled</code> with webpack.
    See <a href="https://github.com/everdimension/web-worker-test/tree/master/src">source code</a> for details.
  </p>
  <script src="build/performancePolyfill.bundle.js"></script>
  <script src="build/view.bundle.js"></script>
  <script src="build/app.bundle.js"></script>
  <script src="build/app.untouched-by-webpack.bundle.js"></script>
</body>
</html>
